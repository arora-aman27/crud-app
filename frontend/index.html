<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple CRUD App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-5">
  <h2>CRUD Item List</h2>
  <form id="itemForm" class="mb-3">
    <input type="text" id="itemName" placeholder="Item name" class="form-control mb-2" required />
    <input type="number" id="itemQty" placeholder="Quantity" class="form-control mb-2" />
    <button class="btn btn-primary">Add Item</button>
  </form>
  <ul id="itemList" class="list-group"></ul>

  <script>
    const form = document.getElementById('itemForm');
    const list = document.getElementById('itemList');

    async function fetchItems() {
      const res = await fetch('http://localhost:5000/api/items');
      const items = await res.json();
      list.innerHTML = '';
      items.forEach(item => {
        const li = document.createElement('li');
        li.className = 'list-group-item d-flex justify-content-between align-items-center';
        li.innerHTML = `${item.name} (Qty: ${item.quantity}) <button onclick="deleteItem('${item._id}')" class="btn btn-sm btn-danger">Delete</button>`;
        list.appendChild(li);
      });
    }

    form.onsubmit = async (e) => {
      e.preventDefault();
      const name = document.getElementById('itemName').value;
      const quantity = document.getElementById('itemQty').value;
      await fetch('http://localhost:5000/api/items', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ name, quantity })
      });
      form.reset();
      fetchItems();
    };

    async function deleteItem(id) {
      await fetch(`http://localhost:5000/api/items/${id}`, { method: 'DELETE' });
      fetchItems();
    }

    fetchItems();
  </script>
</body>
</html>

